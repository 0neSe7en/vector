[package]
name = "buffers"
version = "0.1.0"
authors = ["Vector Contributors <vector@timber.io>"]
edition = "2018"
publish = false

[dependencies]
bytes = { version = "1.1.0", default-features = false }
db-key = { version = "0.0.5", default-features = false, optional = true }
futures = { version = "0.3.17", default-features = false, features = ["std"] }
leveldb = { path = "/home/blt/projects/us/troutwine/leveldb", default-features = false, optional = true }
metrics = { version = "0.17.0", default-features = false, features = ["std"] }
pin-project = { version = "1.0.8", default-features = false }
serde = { version = "1.0.130", default-features = false, features = ["derive"] }
snafu = { version = "0.6.10", default-features = false, features = ["std"], optional = true }
tokio = { version = "1.12.0", default-features = false, features = ["rt", "macros", "rt-multi-thread", "net"] }
tracing = { version = "0.1.28", default-features = false }
[target.'cfg(loom)'.dependencies]
loom = "0.5"

[dev-dependencies]
criterion = { version = "0.3", features = ["html_reports"] }
pretty_assertions = "0.7.2"
proptest = "1.0"
proptest-derive = "0.3"
tempdir = "0.3"
tokio-test = "0.4.2"
once_cell = "1.8"
rand = "0.8"

[features]
disk-buffer = ["db-key", "snafu", "leveldb"]

[[bench]]
name = "on_disk"
harness = false
required-features = ["disk-buffer"]

[[bench]]
name = "in_memory"
harness = false

# RFC 9569 - 2021-10-18 - Pipeline 2.0

We recently introduced the concept of Pipelines into Vector. The purpose was to break down Vector’s complex graph of processing along service and team lines to provide smaller, simpler units of collaboration. The first version of this feature landed without any restrictions -- unrestricted sub-graphs with no limit on complexity.

## Context

- [Pipeline 1.0](https://github.com/vectordotdev/vector/blob/v0.17.0/rfcs/2021-07-19-8216-multiple-pipelines.md)
- [Pipeline 2.0](https://docs.google.com/document/d/19L5p-kqvROkygDy9t21nV9EOmxgb_DDbsvoV65ixrk0/edit?usp=sharing)

## Cross cutting concerns

- [Automatic namespacing RFC](https://github.com/vectordotdev/vector/pull/9571)

## Scope

### In scope

- List work being directly addressed with this RFC.

### Out of scope

- List work that is completely out of scope. Use this to keep discussions focused. Please note the "future changes" section at the bottom.

## Pain

- Misalignment with Datadog customers. Vector’s Pipelines are very different from Datadog’s LWL Pipelines. This is a problem since Vector is intended to be the on-prem version of [LWL Pipelines](https://docs.datadoghq.com/logs/log_configuration/pipelines/). Datadog customers should be able to seamlessly migrate from their current LWL pipelines to on-prem. The misalignment in Pipelines behavior means that the transition will be awkward at best.

- Mixed role concerns. Vector’s Pipelines are a user feature intended to delegate management of processing to teams, but creating a pipeline requires admin knowledge. For example, Pipeline transforms must know the IDs of the global components they want to accept data from (an admin concern). This coupling means admin are locked into those ID’s, making it difficult to make changes, such as inserting a transform in between sources and pipelines for pre-processing.

- Steep learning curve. Vector’s DAG processing model is a powerful model that enables advanced use cases, but it comes at the cost of complexity relative to [Datadog’s LWL](https://docs.datadoghq.com/logs/log_configuration/pipelines/) linear processing model. Features designed for collaboration are especially sensitive to complexity and need to serve the lowest common denominator. Building a graph of processing is inherently more complex and likely to confuse users, meaning admin will need to intervene more often.

- Unbounded complexity. Finally, Pipelines are free to create complex sub-graphs that overstep the intended service/team lines. This defeats the purpose of pipelines and deviates from our intentions, creating misalignment between us and our users. This is likely to create unintended edge cases that create performance and runtime problems, severely diminishing the UX of this feature.

## Proposal

### User Experience

- Explain your change as if you were describing it to a Vector user. We should be able to share this section with a Vector user to solicit feedback.
- Does this change break backward compatibility? If so, what should users do to upgrade?

### Implementation

- Explain your change as if you were presenting it to the Vector team.
- When possible, demonstrate with psuedo code not text.
- Be specific. Be opinionated. Avoid ambiguity.

## Rationale

- Why is this change worth it?
- What is the impact of not doing this?
- How does this position us for success in the future?

## Drawbacks

- Why should we not do this?
- What kind on ongoing burden does this place on the team?

## Prior Art

- List prior art, the good and bad.
- Why can't we simply use or copy them?

## Alternatives

- What other approaches have been considered and why did you not choose them?
- How about not doing this at all?

## Outstanding Questions

- List any remaining questions.
- Use this to resolve ambiguity and collaborate with your team during the RFC process.
- *These must be resolved before the RFC can be merged.*

## Plan Of Attack

Incremental steps to execute this change. These will be converted to issues after the RFC is approved:

- [ ] Submit a PR with spike-level code _roughly_ demonstrating the change.
- [ ] Incremental change #1
- [ ] Incremental change #2
- [ ] ...

Note: This can be filled out during the review process.

## Future Improvements

- List any future improvements. Use this to keep your "plan of attack" scope small and project a sound design.
